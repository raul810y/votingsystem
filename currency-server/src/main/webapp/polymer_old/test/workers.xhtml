<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/WEB-INF/templates/polymer.xhtml">
    <ui:define name="head">
        <link href="../resources/forgePKCS7.html" rel="import"/>
        <style></style>
    </ui:define>
    <ui:define name="content">
        <input id="inputForWorker"/>
            <button id="btnSubmit">Send to the worker</button><button id="killWorker">Stop the worker</button>
        <div id="output"></div>


        <script>
            //<![CDATA[
            window.addEventListener('WebComponentsReady', function() {
                console.log("worker.xhtml - WebComponentsReady")
            })

            var _output = document.getElementById("output");
            if (window.Worker) {
                // Getting references to the 3 other HTML elements
                var _btnSubmit = document.getElementById("btnSubmit");
                var _inputForWorker = document.getElementById("inputForWorker");
                var _killWorker = document.getElementById("killWorker");
                var myHelloWorker = new Worker('workers.js');

                myHelloWorker.addEventListener("message", function (event) {
                    document.getElementById("output").textContent = event.data;
                }, false);
                myHelloWorker.postMessage("workers.xhtml");
                _btnSubmit.addEventListener("click", function (event) {
                    myHelloWorker.postMessage(_inputForWorker.value);
                }, false);

                _killWorker.addEventListener("click", function (event) {
                    myHelloWorker.terminate();
                    _output.textContent = "The worker has been stopped.";
                }, false);
            }
            else {
                _output.innerHTML = "Web Workers are not supported by your browser.";
            }
            //]]>
        </script>
    </ui:define>
</ui:composition>
