# cryptocurrency application

### Configure Wildfly with HTTPS and HTTP/2
[Using HTTP2 With Wildfly](http://undertow.io/blog/2015/03/26/HTTP2-In-Wildfly.html)
[Keystore used in development](../libs/localhost.jks)

### Configure static resources handler
To serve the backups generated by the application Wildfly must have configured a file handler and a location with undertow subsystem. 
Change what follows to the standalone / domain  server configurationt:

    <server name="default-server">
        <http-listener name="default" socket-binding="http"/>
        <host name="default-host" alias="localhost">
            <location name="/" handler="welcome-content"/>
            <location name="/ControlCenter/static" handler="controlCenterStatic"/>
        </host>
    </server>
    <handlers>
        <file name="welcome-content" path="${jboss.home.dir}/welcome-content" directory-listing="true"/>
        <file name="controlCenterStatic" path="/var/local/voting_system/control_center" directory-listing="true"/>
    </handlers>

The value of the variables **vs.staticResourcesURL** and **vs.staticResourcesPath** must be set according to the values configured.

#### enable appplication filter
To enable application filters change what follows to the standalone / domain  server configurationt 
([details] (https://docs.jboss.org/author/display/WFLY8/Undertow+subsystem+configuration)):
    
        <servlet-container name="default" allow-non-standard-wrappers="true">

#### Build and Deploy on Wildfly
1. Application environment default is set to DEVELOPMENT, to change that add what follows to the standalone / domain 
server configuration just after the extensions section:

        <system-properties>
                <property name="vs.environment" value="PRODUCTION"/>
        </system-properties>

2. Make sure you have  Wildfly server started.
3. The application needs access to a [timestamp server](https://github.com/votingsystem/votingsystem/tree/master/TimeStampServer),
the property **vs.timeStampServerURL** must be set according to that.
4. Add a datasource with the name 'java:jboss/datasources/ControlCenter'
5. Use this command to build and deploy the archive:

            mvn clean package wildfly:deploy
            
#### Certificates
[Certificates](src/main/webapp/WEB-INF/votingsystem/certs/readme.md)