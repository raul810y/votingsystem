<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/WEB-INF/templates/polymer.xhtml">
    <ui:define name="head">
        <link href="../resources/forgePKCS7.html" rel="import"/>
        <script type="text/javascript" src="./ForgeUtils.js"></script>
        <script type="text/javascript" src="./TestUtils.js"></script>
        <style></style>
    </ui:define>
    <ui:define name="content">

        <script>
            function createPKCS7MessageTimeStamped() {
                var certPrivateKeyPair = test.createSelfSignedCert();
                var contentToSign = "Hello signed and TimeStamped message"
                vs.getTimeStampToken(contentToSign, function (timeStampTokenASN1) {
                    console.log("timeStampTokenASN1:")
                    console.log(timeStampTokenASN1)
                    var cmsSignedMessage =  test.createCMSSignedMessage(certPrivateKeyPair, contentToSign, timeStampTokenASN1)
                    console.log("timeStamped CMSSignedMessage:")
                    console.log(cmsSignedMessage)
                    var pem = forge.pkcs7.messageToPem(cmsSignedMessage);
                    console.log("timeStamped CMSSignedMessage PEM:")
                    console.log(pem)
                    var p7 = forge.pkcs7.messageFromPem(pem);
                    console.log(p7)
                })
            }

            function createPKCS7Message() {
                var certPrivateKeyPair = test.createSelfSignedCert();
                var cmsSignedMessage =  test.createCMSSignedMessage(certPrivateKeyPair, 'Some content to be signed.')
                console.log("CMSSignedMessage:")
                console.log(cmsSignedMessage)
                var pem = forge.pkcs7.messageToPem(cmsSignedMessage);
                var cmsSignedMessage = forge.pkcs7.messageFromPem(pem);
                console.log("CMSSignedMessage FROM PEM:")
                console.log(cmsSignedMessage)
            }

            createPKCS7Message()
        </script>
    </ui:define>
</ui:composition>