<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/WEB-INF/templates/polymer.xhtml">
    <ui:define name="head">
    </ui:define>
    <ui:define name="content">
        <div id="sessionPageMainDiv" class="pagevs vertical layout center" hidden="">
            <div>
                <div><b>document.cookie: </b><span id="documentCookie"></span></div>
                <div><b>Session ID: </b><span id="sessionDiv"></span></div>
            </div>
            <div  class="buttonvs" style="margin: 20px 0 0 0;" onclick="showAccessQRCode()">show Access QRCode</div>
            <div class="vertical layout center center-justified">
                <div id="msgDiv" style="font-size: 2em;font-weight: bold; color: #888;"></div>
            </div>
        </div>

        <script>
            //<![CDATA[
                document.addEventListener('WebComponentsReady', function() {
                    console.log("polymer.xhtml - WebComponentsReady")
                    document.querySelector("#sessionPageMainDiv").hidden = null;
                });
                function  showAccessQRCode() {
                    VotingSystemClient.showAccessQRCode()
                }

                VotingSystemClient.addSocketEventListener("connected", function() {
                    document.querySelector("#msgDiv").innerHTML = "connected with mobile";
                })

                var JSESSIONID =  getCookie("JSESSIONID")

                document.querySelector("#documentCookie").innerHTML = document.cookie;
                document.querySelector("#sessionDiv").innerHTML = JSESSIONID

                function getCookie(name) {
                    var value = "; " + document.cookie;
                    var parts = value.split("; " + name + "=");
                    if (parts.length == 2) result = parts.pop().split(";").shift();
                    return result.split(".")[0];
                }
            //]]>
        </script>
    </ui:define>
</ui:composition>