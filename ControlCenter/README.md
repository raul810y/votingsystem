## control center

### Configure static resources handler
To serve the backups generated by the application Wildfly must have configured a file handler and a location with undertow subsystem. 
Change what follows to the standalone / domain  server configuration (if you are working in standalone mode change it on standalone-full.xml, in order to run default JMS):

    <server name="default-server">
        <http-listener name="default" socket-binding="http"/>
        <host name="default-host" alias="localhost">
            <location name="/" handler="welcome-content"/>
            <location name="/ControlCenter/static" handler="controlCenterStatic"/>
        </host>
    </server>
    <handlers>
        <file name="welcome-content" path="${jboss.home.dir}/welcome-content" directory-listing="true"/>
        <file name="controlCenterStatic" path="/var/local/voting_system/control_center" directory-listing="true"/>
    </handlers>

The value of the variables 'vs.staticResourcesURL' and 'vs.staticResourcesPath' must be set according to the values configured.

#### enable appplication filter
To enable application filters change what follows to the standalone / domain  server configuration 
([details] (https://docs.jboss.org/author/display/WFLY8/Undertow+subsystem+configuration)):
    
        <servlet-container name="default" allow-non-standard-wrappers="true">

#### Build and Deploy on Wildfly
1. Application environment default is set to DEVELOPMENT, to change that add what follows to the standalone / domain 
server configuration just after the extensions section:

        <system-properties>
                <property name="vs.environment" value="PRODUCTION"/>
        </system-properties>
2. The application needs access to a [timestamp server](https://github.com/votingsystem/votingsystem/tree/master/TimeStampServer),
the property **vs.timeStampServerURL** must be set according to that.
3. Make sure you have  Wildfly server started.
4. Add the datasource in Wildfly through the management interface:

        Name: ControlCenter
        JNDI Name: java:jboss/datasources/ControlCenter
        Connection URL: jdbc:postgresql://localhost:5432/ControlCenter
        username:userVS
        password:userVS
        
5. Use this command to build and deploy the archive:

            mvn clean package wildfly:deploy
            
#### Certificates
[Certificates](src/main/webapp/WEB-INF/votingsystem/certs/readme.md)