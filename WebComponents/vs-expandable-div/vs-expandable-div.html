<dom-module name="vs-expandable-div">
    <template>
        <style>
            :host {
                display: block;
                position: relative;
            }
            .mainDiv {
                border-radius: 2px;
                border: 1px solid #ccc;
                padding: 0 3px 0 3px;
                color: #ccc;
            }
        </style>
        <div class="mainDiv">
            <div id="captionRow" class="horizontal layout center center-justified" style="border-bottom: 0px solid;">
                <div hidden="[[!checkBoxEnabled]]" on-click="toggleCheck" style="cursor: pointer;font-size: 1.2em; width: 25px;">
                    <i id="checkIcon" class="fa fa-check-square-o"></i>
                </div>
                <div class="flex" style="margin: 0 0 0 10px;color: #888;">[[caption]]</div>
                <div on-click="expand" style="cursor: pointer;"><i id="expandIcon" class="fa fa-plus"></i></div>
            </div>
            <div id="contentDiv" style="display: none;z-index: 1; width: 99.3%;position: absolute;background-color: #fefefe;
                border: 1px solid #ccc;border-top: 1px solid transparent;left: 0px;"></div>
        </div>
    </template>
    <script>
        Polymer({
            is:'vs-expandable-div',
            properties: {
                caption:{type:String},
                checkBoxEnabled:{type:Boolean, value:false},
                expanded:{type:Boolean, value:false},
                disabled:{type:Boolean, value:false}
            },
            ready: function() {
                console.log(this.tagName + " - ready")
            },
            toggleCheck:function() {
                this.disabled = !this.disabled
                this.fire("disabled", this.disabled)
                if(this.disabled === true) {
                    this.$.checkIcon.setAttribute('class', 'fa fa-square-o')
                } else this.$.checkIcon.setAttribute('class', 'fa fa-check-square-o')
            },
            expand:function() {
                this.expanded = !this.expanded
                if(this.expanded === true) {
                    this.$.contentDiv.style.display = 'block'
                    this.$.captionRow.style['border-bottom'] = '1px solid'
                    this.$.expandIcon.setAttribute('class', 'fa fa-minus')
                } else {
                    this.$.contentDiv.style.display = 'none'
                    this.$.captionRow.style['border-bottom'] = '0px'
                    this.$.expandIcon.setAttribute('class', 'fa fa-plus')
                }
            },
            appendContent:function(htmlNode) {
                var mainContentNode = this.$.contentDiv
                if(mainContentNode.childNodes[0]) mainContentNode.removeChild(mainContentNode.childNodes[0])
                mainContentNode.appendChild(htmlNode)
            },
            setContent:function(innerHTML) {
                return this.$.contentDiv.innerHTML = innerHTML
            }
        });
    </script>
</dom-module>