## access control

### Configure static resources handler
To serve the backups generated by the application Wildfly must have configured a file handler and a location with undertow subsystem. 
Change what follows to the standalone / domain  server configuration (if you are working in standalone mode change it on standalone-full.xml, in order to run default JMS):

    <server name="default-server">
        <http-listener name="default" socket-binding="http"/>
        <host name="default-host" alias="localhost">
            <location name="/" handler="welcome-content"/>
            <location name="/AccessControl/static" handler="accessControlStatic"/>
        </host>
    </server>
    <handlers>
        <file name="welcome-content" path="${jboss.home.dir}/welcome-content" directory-listing="true"/>
        <file name="accessControlStatic" path="/var/local/voting_system/access_control" directory-listing="true"/>
    </handlers>

The value of the variables 'vs.staticResourcesURL' and 'vs.staticResourcesPath' must be set according to the values configured.

The applications need access to a running instance of the [timestamp server](https://github.com/votingsystem/votingsystem/tree/master/TimeStampServer) 
to add timestamps to the signatures. You must install this app in your server before running the **voting system** or the **currency server**

The applications need access to a running instance of the [timestamp server](https://github.com/votingsystem/votingsystem/tree/master/ControlCenter).
 You must install this app in your server before running **Access Control**

#### enable appplication filter
To enable application filters change what follows to the standalone / domain  server configuration 
([details] (https://docs.jboss.org/author/display/WFLY8/Undertow+subsystem+configuration)):
    
        <servlet-container name="default" allow-non-standard-wrappers="true">

#### Build and Deploy on Wildfly
1. Make sure you have  Wildfly server started.
2. The application needs access to a [timestamp server](https://github.com/votingsystem/votingsystem/tree/master/TimeStampServer),
the property **vs.timeStampServerURL** must be set according to that.
3. Build and deploy [**control center application**](https://github.com/votingsystem/votingsystem/tree/master/ControlCenter).
4. Add the datasource in Wildfly through the management interface:

        Name: AccessControl
        JNDI Name: java:jboss/datasources/AccessControl
        Connection URL: jdbc:postgresql://localhost:5432/AccessControl
        username:userVS
        password:userVS
        
5. Use this command to build and deploy the archive:

            mvn clean package wildfly:deploy
            
#### Certificates
[Certificates](src/main/webapp/WEB-INF/votingsystem/certs/readme.md)